# 📋 Описание курсового проекта: Система аренды автомобилей

## 🎯 Общая концепция

**Десктопное многооконное приложение** для управления агентством по сдаче автомобилей в аренду. 
Приложение поддерживает работу с несколькими пользователями (клиенты и администраторы) с разными правами доступа.

---

## 👥 Типы пользователей

### 1. **Администратор** (admin/admin123)
- Полный доступ ко всем функциям
- Управление автомобилями
- Просмотр всех аренд
- Управление пользователями
- Просмотр отчетов и статистики

### 2. **Клиент**
- Просмотр доступных автомобилей
- Оформление аренды
- Просмотр своих аренд
- Оплата штрафов

---

## 🖥️ Визуальная структура приложения

### **Экран 1: Окно входа (LoginWindow)**
```
┌─────────────────────────────────────────┐
│   🚗 Агентство аренды автомобилей      │
├─────────────────────────────────────────┤
│                                         │
│   Логин:    [________________]         │
│                                         │
│   Пароль:   [________________]         │
│                                         │
│            [  Войти  ]                 │
│                                         │
│   Регистрация нового клиента           │
│   [  Зарегистрироваться  ]             │
│                                         │
└─────────────────────────────────────────┘
```

---

### **Экран 2: Главное окно КЛИЕНТА (ClientMainWindow)**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🚗 Агентство аренды | Клиент: Иван Иванов          [Выход]    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [Доступные автомобили]  [Мои аренды]  [Мои штрафы]            │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 📋 Доступные автомобили                                   │ │
│  ├──────────────────────────────────────────────────────────┤ │
│  │                                                           │ │
│  │  Поиск: [Поиск по марке...]  [🔍 Найти]                  │ │
│  │                                                           │ │
│  │  ┌─────────────────────────────────────────────────────┐ │ │
│  │  │ 🚗 Toyota Camry                                     │ │ │
│  │  │    Статус: Доступен                                │ │ │
│  │  │    Цена: 2500 руб/день                             │ │ │
│  │  │    [Забронировать]                                 │ │ │
│  │  └─────────────────────────────────────────────────────┘ │ │
│  │                                                           │ │
│  │  ┌─────────────────────────────────────────────────────┐ │ │
│  │  │ 🚗 BMW X5                                            │ │ │
│  │  │    Статус: Доступен                                │ │ │
│  │  │    Цена: 5000 руб/день                             │ │ │
│  │  │    [Забронировать]                                 │ │ │
│  │  └─────────────────────────────────────────────────────┘ │ │
│  │                                                           │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### **Экран 3: Оформление аренды (RentalDialog)**
```
┌─────────────────────────────────────────┐
│   Оформление аренды                     │
├─────────────────────────────────────────┤
│                                         │
│   Автомобиль: Toyota Camry              │
│   Цена за день: 2500 руб               │
│                                         │
│   Дата начала:  [📅 15.01.2025]        │
│   Дата окончания: [📅 20.01.2025]      │
│                                         │
│   Количество дней: 5                   │
│                                         │
│   ┌─────────────────────────────────┐ │
│   │  Расчет стоимости:              │ │
│   │  • 5 дней × 2500 = 12500 руб   │ │
│   │  • Скидка: 0 руб               │ │
│   │  ─────────────────────────────  │ │
│   │  ИТОГО: 12500 руб              │ │
│   └─────────────────────────────────┘ │
│                                         │
│   [Отмена]              [Оформить]     │
│                                         │
└─────────────────────────────────────────┘
```

---

### **Экран 4: Главное окно АДМИНИСТРАТОРА (AdminMainWindow)**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🚗 Агентство аренды | Администратор: admin          [Выход]    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [Автомобили]  [Аренды]  [Клиенты]  [Отчеты]  [Импорт/Экспорт] │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 📊 Панель управления                                      │ │
│  ├──────────────────────────────────────────────────────────┤ │
│  │                                                           │ │
│  │  📈 Статистика:                                          │ │
│  │  • Всего автомобилей: 15                                 │ │
│  │  • Доступно: 8                                          │ │
│  │  • В аренде: 5                                           │ │
│  │  • На обслуживании: 2                                    │ │
│  │                                                           │ │
│  │  💰 Доход за месяц: 250,000 руб                         │ │
│  │  📋 Активных аренд: 5                                    │ │
│  │                                                           │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 🚗 Управление автомобилями                                │ │
│  ├──────────────────────────────────────────────────────────┤ │
│  │  [➕ Добавить автомобиль]                                │ │
│  │                                                           │ │
│  │  ┌─────────────────────────────────────────────────────┐ │ │
│  │  │ ID: 1 | Toyota Camry | Доступен | 2500 руб/день  │ │ │
│  │  │ [✏️ Редактировать] [🗑️ Удалить]                  │ │ │
│  │  └─────────────────────────────────────────────────────┘ │ │
│  │                                                           │ │
│  │  ┌─────────────────────────────────────────────────────┐ │ │
│  │  │ ID: 2 | BMW X5 | В аренде | 5000 руб/день          │ │ │
│  │  │ [✏️ Редактировать] [🗑️ Удалить]                  │ │ │
│  │  └─────────────────────────────────────────────────────┘ │ │
│  │                                                           │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### **Экран 5: Добавление/Редактирование автомобиля (CarDialog)**
```
┌─────────────────────────────────────────┐
│   Добавление автомобиля                 │
├─────────────────────────────────────────┤
│                                         │
│   Марка:     [Toyota________]          │
│                                         │
│   Модель:    [Camry________]           │
│                                         │
│   Статус:    [Доступен ▼]              │
│              • Доступен                │
│              • В аренде                │
│              • На обслуживании         │
│              • Зарезервирован          │
│                                         │
│   Цена за день: [2500] руб             │
│                                         │
│   [Отмена]              [Сохранить]     │
│                                         │
└─────────────────────────────────────────┘
```

---

### **Экран 6: Просмотр аренд (RentalsWindow)**
```
┌─────────────────────────────────────────────────────────────────┐
│   Управление арендами                                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Поиск: [Поиск по клиенту...]  [Поиск по дате...]  [🔍 Найти]  │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ ID: 1 | Клиент: Иван Иванов                              │ │
│  │ Автомобиль: Toyota Camry                                 │ │
│  │ Период: 15.01.2025 - 20.01.2025                         │ │
│  │ Стоимость: 12500 руб                                     │ │
│  │ Статус: [Активна]                                       │ │
│  │ [📋 Детали] [✅ Завершить] [💰 Штраф]                   │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ ID: 2 | Клиент: Петр Петров                              │ │
│  │ Автомобиль: BMW X5                                       │ │
│  │ Период: 10.01.2025 - 12.01.2025                         │ │
│  │ Стоимость: 10000 руб                                     │ │
│  │ Статус: [Завершена]                                     │ │
│  │ [📋 Детали]                                             │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### **Экран 7: Расчет штрафа (FineDialog)**
```
┌─────────────────────────────────────────┐
│   Расчет штрафа за просрочку            │
├─────────────────────────────────────────┤
│                                         │
│   Аренда: #1 - Toyota Camry             │
│   Клиент: Иван Иванов                   │
│                                         │
│   Планируемая дата возврата:            │
│   20.01.2025                            │
│                                         │
│   Фактическая дата возврата:            │
│   [📅 22.01.2025]                       │
│                                         │
│   Просрочка: 2 дня                      │
│                                         │
│   ┌─────────────────────────────────┐ │
│   │  Расчет штрафа:                 │ │
│   │  • Базовая стоимость: 2500 руб  │ │
│   │  • Коэффициент штрафа: 1.5x     │ │
│   │  • 2 дня × 2500 × 1.5 = 7500   │ │
│   │  ─────────────────────────────  │ │
│   │  ШТРАФ: 7500 руб                │ │
│   └─────────────────────────────────┘ │
│                                         │
│   Причина: [Просрочка возврата________]│
│                                         │
│   [Отмена]              [Применить]     │
│                                         │
└─────────────────────────────────────────┘
```

---

### **Экран 8: Отчеты (ReportsWindow)**
```
┌─────────────────────────────────────────────────────────────────┐
│   Отчеты и статистика                                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Период: [📅 01.01.2025] - [📅 31.01.2025]  [Сформировать]     │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 📊 Общая статистика                                       │ │
│  ├──────────────────────────────────────────────────────────┤ │
│  │                                                           │ │
│  │  💰 Доход: 250,000 руб                                   │ │
│  │  📋 Всего аренд: 45                                      │ │
│  │  ⏱️ Средняя длительность: 5 дней                        │ │
│  │  🚗 Загруженность парка: 75%                             │ │
│  │                                                           │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 📈 Доход по дням                                          │ │
│  ├──────────────────────────────────────────────────────────┤ │
│  │  [График доходов]                                        │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 🚗 Популярные автомобили                                  │ │
│  ├──────────────────────────────────────────────────────────┤ │
│  │  1. Toyota Camry - 15 аренд                              │ │
│  │  2. BMW X5 - 12 аренд                                    │ │
│  │  3. Mercedes C-Class - 10 аренд                          │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
│  [📄 Экспорт в Excel]  [📄 Экспорт в PDF]                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔄 Сценарии работы

### **Сценарий 1: Клиент оформляет аренду**

1. **Вход в систему**
   - Клиент вводит логин/пароль
   - Система проверяет учетные данные
   - Открывается главное окно клиента

2. **Просмотр автомобилей**
   - Клиент видит список доступных автомобилей
   - Может искать по марке (например, "Toyota")
   - Видит статус, цену за день

3. **Оформление аренды**
   - Клиент нажимает "Забронировать"
   - Открывается диалог оформления
   - Выбирает даты начала и окончания
   - Система автоматически рассчитывает стоимость:
     - По дням (базовая цена × количество дней)
     - При аренде на неделю - скидка 10%
     - При аренде на месяц - скидка 20%
   - Клиент подтверждает аренду
   - Статус автомобиля меняется на "В аренде" (Observer паттерн)

4. **Просмотр своих аренд**
   - Клиент переходит в "Мои аренды"
   - Видит все свои активные и завершенные аренды
   - Может видеть детали каждой аренды

---

### **Сценарий 2: Администратор управляет автомобилями**

1. **Вход как администратор**
   - Вход с учетными данными admin/admin123
   - Открывается панель администратора

2. **Добавление автомобиля**
   - Нажимает "Добавить автомобиль"
   - Вводит марку, модель, цену
   - Устанавливает статус "Доступен"
   - Сохраняет - автомобиль добавляется в БД

3. **Редактирование автомобиля**
   - Выбирает автомобиль из списка
   - Нажимает "Редактировать"
   - Может изменить цену, статус
   - Сохраняет изменения

4. **Просмотр статистики**
   - Переходит в "Отчеты"
   - Видит общую статистику:
     - Количество автомобилей по статусам
     - Доход за период
     - Количество аренд
     - Загруженность парка

---

### **Сценарий 3: Расчет штрафа за просрочку**

1. **Клиент не вернул автомобиль вовремя**
   - Планируемая дата возврата: 20.01.2025
   - Текущая дата: 22.01.2025
   - Просрочка: 2 дня

2. **Администратор начисляет штраф**
   - Открывает аренду
   - Нажимает "Штраф"
   - Система автоматически рассчитывает:
     - Базовая стоимость × коэффициент штрафа (1.5x) × дни просрочки
     - 2500 × 1.5 × 2 = 7500 руб
   - Администратор указывает причину
   - Штраф сохраняется в БД

3. **Клиент видит штраф**
   - В разделе "Мои штрафы" видит начисленный штраф
   - Может оплатить его

---

### **Сценарий 4: Поиск и фильтрация**

1. **Поиск по марке**
   - Вводит "Toyota" в поле поиска
   - Система показывает только автомобили Toyota

2. **Поиск по дате**
   - Администратор выбирает период
   - Видит все аренды в этом периоде

3. **Поиск по клиенту**
   - Вводит имя клиента
   - Видит все аренды этого клиента

---

### **Сценарий 5: Импорт/Экспорт данных**

1. **Экспорт в JSON/XML**
   - Администратор нажимает "Экспорт"
   - Выбирает формат (JSON или XML)
   - Выбирает данные (автомобили, аренды, отчеты)
   - Сохраняет файл

2. **Импорт из JSON/XML**
   - Администратор нажимает "Импорт"
   - Выбирает файл
   - Система загружает данные в БД

---

## 🎨 Паттерны проектирования

### **1. Strategy (Стратегия) - Расчет стоимости**
```
┌─────────────────────────────────────┐
│   PricingStrategy (интерфейс)      │
│   + calculateCost()                │
└─────────────────────────────────────┘
              ▲
              │
    ┌─────────┼─────────┐
    │         │         │
┌───┴───┐ ┌──┴───┐ ┌───┴───┐
│ Daily │ │Weekly│ │Monthly│
│ Price │ │Price │ │ Price │
└───────┘ └──────┘ └───────┘
```

- **DailyPricingStrategy** - расчет по дням (базовая цена × дни)
- **WeeklyPricingStrategy** - расчет по неделям (скидка 10%)
- **MonthlyPricingStrategy** - расчет по месяцам (скидка 20%)
- **FinePricingStrategy** - расчет штрафа (цена × 1.5 × дни просрочки)

### **2. Observer (Наблюдатель) - Обновление статуса**
```
┌──────────────────┐      ┌──────────────────┐
│   Rental         │      │   Car            │
│   (Subject)      │─────▶│   (Observer)     │
│                  │      │                  │
│   + complete()   │      │   + update()     │
└──────────────────┘      └──────────────────┘
```

- При завершении аренды автоматически обновляется статус автомобиля
- При создании аренды статус меняется на "В аренде"
- При возврате автомобиля статус меняется на "Доступен"

---

## 💾 Хранение данных

### **SQLite база данных** (`car_rental.db`)

**Таблица users:**
- id, username, password, full_name, role

**Таблица cars:**
- id, brand, model, status, daily_price

**Таблица rentals:**
- id, car_id, user_id, start_date, end_date, actual_return_date, total_cost, is_completed

**Таблица fines:**
- id, rental_id, amount, date, reason

---

## 📱 Основные функции

### ✅ Для клиента:
- Просмотр доступных автомобилей
- Поиск по марке
- Оформление аренды
- Просмотр своих аренд
- Просмотр штрафов

### ✅ Для администратора:
- Управление автомобилями (CRUD)
- Просмотр всех аренд
- Управление пользователями
- Расчет и начисление штрафов
- Просмотр отчетов и статистики
- Импорт/экспорт данных

---

## 🎯 Итоговая структура окон

1. **LoginWindow** - окно входа
2. **ClientMainWindow** - главное окно клиента
3. **AdminMainWindow** - главное окно администратора
4. **CarDialog** - добавление/редактирование автомобиля
5. **RentalDialog** - оформление аренды
6. **RentalsWindow** - управление арендами (админ)
7. **FineDialog** - расчет штрафа
8. **ReportsWindow** - отчеты и статистика
9. **UsersWindow** - управление пользователями (админ)
10. **ImportExportDialog** - импорт/экспорт данных

---

Это полное визуальное описание того, как должно работать приложение! 🚗✨

