# Автоматическая проверка просроченных аренд и начисление штрафов

## ✅ Реализовано автоматическое начисление штрафов

### Как это работает:

1. **При запуске приложения:**
   - В `main.cpp` вызывается `checkAndApplyOverdueFines()`
   - Проверяются все активные аренды

2. **При открытии окон:**
   - В `AdminMainWindow` и `ClientMainWindow` также вызывается проверка
   - Это гарантирует актуальность данных при каждом открытии

3. **Использование системной даты:**
   - Используется `QDate::currentDate()` - берет текущую дату из системы ПК
   - Если изменить дату на ПК, программа автоматически использует новую дату
   - Штрафы начисляются на основе актуальной системной даты

### Логика работы:

1. **Проверка просрочки:**
   - Сравнивается `QDate::currentDate()` с `rental.getEndDate()`
   - Если текущая дата больше даты возврата → аренда просрочена

2. **Начисление штрафа:**
   - Если штраф еще не начислен → создается новый
   - Если штраф уже есть, но сумма изменилась (прошло больше дней) → обновляется
   - Штраф рассчитывается по формуле: `базовая_цена × 1.5 × дни_просрочки`

3. **Защита от дублирования:**
   - Проверяется, не начислен ли уже штраф за эту просрочку
   - Штраф обновляется только если сумма изменилась

### Пример работы:

**Сценарий:**
- Аренда должна быть возвращена: 15.01.2025
- Текущая дата системы: 17.01.2025
- Просрочка: 2 дня
- Цена автомобиля: 2500 руб/день

**Расчет штрафа:**
- 2500 × 1.5 × 2 = 7500 руб

**Если изменить дату на ПК на 18.01.2025:**
- При следующем запуске программы штраф пересчитается
- Новый штраф: 2500 × 1.5 × 3 = 11250 руб

### Где вызывается проверка:

1. `main.cpp` - при запуске приложения
2. `AdminMainWindow::AdminMainWindow()` - при открытии окна администратора
3. `ClientMainWindow::ClientMainWindow()` - при открытии окна клиента

### Важно:

- ✅ Используется системная дата ПК (`QDate::currentDate()`)
- ✅ Штрафы начисляются автоматически
- ✅ Штрафы пересчитываются при изменении даты
- ✅ Защита от дублирования штрафов
- ✅ Логирование всех операций

